#!/bin/bash

directory="$(dirname "${BASH_SOURCE[0]}")" ;
filename="$(basename "${BASH_SOURCE[0]}")" ;
cd "${directory}"
clear

help_message(){
# hrdoc
echo -e "\e[31m"
# ASCII Art

cat << EOF
      █ █ █ █ █ █ █ █ █ █ █
     ███████████████████████
   ▄▄██                   ██▄▄
   ▄▄██    ███████████    ██▄▄
   ▄▄██   ██         ██   ██▄▄
   ▄▄██   ██         ██   ██▄▄
   ▄▄██   ██         ██   ██▄▄
   ▄▄██   █████████████   ██▄▄
   ▄▄██   ██         ██   ██▄▄
   ▄▄██   ██         ██   ██▄▄
   ▄▄██   ██         ██   ██▄▄
   ▄▄██                   ██▄▄
     ███████████████████████
      █ █ █ █ █ █ █ █ █ █ █
EOF
echo -e "\e[0m"
echo -e "
Welcome to armbian-build system

Usage: ./armbian-build.sh [OPTIONS]

  -h, --help              \033[31mHELP\033[0m:This is a help message for this script.
  KERNEL_ONLY=yes/no      \033[31mKERNEL_ONLY\033[0m: 'yes', only the kernel and u-boot packages are built
  BOARD=board_name        \033[31mBOARD\033[0m: Specifies the target board
  BRANCH=branch_name      \033[31mBRANCH\033[0m:Specifies the target branch
  RELEASE=release_name    \033[31mRELEASE\033[0m:Specifies the target release

Example:
  ./compile.sh BOARD=cubietruck BRANCH=next KERNEL_ONLY=yes RELEASE=stretch
"
}


# Check the passed arguments
if [ "$1" == "--help" ] || [ "$1" == "-h" ]; then

    help_message ;

else
    start_time=$(date +%s)

	bash "./compile.sh" "$@"

    end_time=$(date +%s)

    elapsed_time=$((end_time - start_time))

    echo "Compilation completed in ${elapsed_time} seconds."
fi
